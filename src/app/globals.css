@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* ===== CSS Custom Properties (Design Tokens) ===== */
  :root {
    /* Font families */
    --font-heading: 'Plus Jakarta Sans', system-ui, sans-serif;
    --font-body: 'DM Sans', system-ui, sans-serif;
    --font-mono: 'JetBrains Mono', monospace;

    /* Primary Orange */
    --primary: #F97316;
    --primary-dark: #EA580C;
    --primary-light: #FB923C;

    /* Light mode colors */
    --bg-primary: #FFFFFF;
    --bg-secondary: #F9FAFB;
    --bg-tertiary: #F3F4F6;
    --text-primary: #0F172A;
    --text-secondary: #4B5563;
    --text-muted: #9CA3AF;
    --text-inverse: #FFFFFF;
    --border-default: #E5E7EB;
    --border-subtle: #F3F4F6;

    /* Semantic colors - Light mode */
    --success: #10B981;
    --success-bg: #D1FAE5;
    --warning: #F59E0B;
    --warning-bg: #FEF3C7;
    --error: #EF4444;
    --error-bg: #FEE2E2;
    --info: #3B82F6;
    --info-bg: #DBEAFE;

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    --shadow-glow: 0 0 40px rgba(249, 115, 22, 0.2);

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #F97316 0%, #EA580C 100%);
    --gradient-bg: linear-gradient(180deg, #FFFFFF 0%, #FFF7ED 50%, #FFEDD5 100%);

    /* Toast styling */
    --toast-bg: #FFFFFF;
    --toast-color: #0F172A;

    /* Timing */
    --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
    --ease-in: cubic-bezier(0.4, 0, 1, 1);
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
    --duration-fast: 150ms;
    --duration-normal: 200ms;
    --duration-slow: 300ms;
  }

  /* Dark mode */
  [data-theme="dark"] {
    --bg-primary: #0F0F0F;
    --bg-secondary: #1A1A1A;
    --bg-tertiary: #262626;
    --text-primary: #FFFFFF;
    --text-secondary: #A1A1AA;
    --text-muted: #71717A;
    --text-inverse: #0F172A;
    --border-default: #333333;
    --border-subtle: #262626;

    /* Semantic colors - Dark mode */
    --success: #34D399;
    --success-bg: #064E3B;
    --warning: #FBBF24;
    --warning-bg: #78350F;
    --error: #F87171;
    --error-bg: #7F1D1D;
    --info: #60A5FA;
    --info-bg: #1E3A5F;

    /* Shadows - Dark mode */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
    --shadow-glow: 0 0 40px rgba(249, 115, 22, 0.3);

    /* Gradients - Dark mode */
    --gradient-bg: linear-gradient(180deg, #0F0F0F 0%, #1A1A1A 100%);

    /* Toast styling */
    --toast-bg: #1A1A1A;
    --toast-color: #FFFFFF;
  }

  /* Base styles */
  * {
    border-color: var(--border-default);
  }

  body {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-family: var(--font-body);
    @apply antialiased;
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
  }

  code, pre, kbd, samp {
    font-family: var(--font-mono);
  }

  /* Focus visible styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  [data-theme="dark"] *:focus-visible {
    @apply ring-offset-surface-900;
  }

  /* Custom scrollbar - Light mode */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    background-color: var(--border-default);
    @apply rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    background-color: var(--text-muted);
  }

  /* Custom thin scrollbar for sidebars */
  .custom-scrollbar::-webkit-scrollbar {
    @apply w-1;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background-color: var(--border-default);
    @apply rounded-full;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background-color: var(--text-muted);
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* ===== Glass morphism effect ===== */
  .glass {
    background-color: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(12px);
  }

  [data-theme="dark"] .glass {
    background-color: rgba(15, 15, 15, 0.8);
  }

  /* ===== Gradient text ===== */
  .gradient-text {
    @apply bg-clip-text text-transparent;
    background-image: var(--gradient-primary);
  }

  /* ===== Focus ring utility ===== */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  [data-theme="dark"] .focus-ring {
    @apply focus:ring-offset-surface-900;
  }

  /* ===== Card hover effect ===== */
  .card-hover {
    @apply hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200;
  }

  /* ===== Ticket card ===== */
  .ticket-card {
    background-color: var(--bg-primary);
    border: 1px solid var(--border-default);
    @apply rounded-xl p-4 transition-all duration-200;
  }

  .ticket-card:hover {
    border-color: var(--primary);
    box-shadow: var(--shadow-md);
  }

  /* ===== Kanban column ===== */
  .kanban-column {
    @apply min-w-[320px] max-w-[350px] flex-shrink-0;
  }

  .kanban-column-header {
    @apply px-4 py-3 rounded-t-xl font-semibold flex items-center justify-between text-sm uppercase tracking-wide;
    color: var(--text-secondary);
  }

  .kanban-column-body {
    background-color: var(--bg-secondary);
    @apply p-2 rounded-b-xl min-h-[500px] space-y-3;
  }

  /* Kanban column status colors - Top border accents */
  .kanban-column[data-status="backlog"],
  .kanban-column[data-status="todo"] {
    border-top: 3px solid #9CA3AF;
  }

  .kanban-column[data-status="in-progress"],
  .kanban-column[data-status="in_progress"] {
    border-top: 3px solid #F97316;
  }

  .kanban-column[data-status="review"],
  .kanban-column[data-status="in_review"] {
    border-top: 3px solid #3B82F6;
  }

  .kanban-column[data-status="done"],
  .kanban-column[data-status="completed"],
  .kanban-column[data-status="approved"] {
    border-top: 3px solid #10B981;
  }

  /* Drag and drop states */
  .kanban-column.drag-over {
    background-color: var(--bg-tertiary);
    border: 2px dashed var(--primary);
  }

  .ticket-placeholder {
    background-color: rgba(249, 115, 22, 0.1);
    border: 2px dashed rgba(249, 115, 22, 0.3);
    @apply rounded-xl h-24;
  }

  /* ===== Status badges ===== */
  .status-backlog {
    background-color: var(--bg-tertiary);
    color: var(--text-secondary);
  }
  
  .status-todo {
    @apply bg-primary-100 text-primary-700;
  }
  [data-theme="dark"] .status-todo {
    @apply bg-primary-900/50 text-primary-300;
  }
  
  .status-in_progress {
    @apply bg-warning-100 text-warning-700;
  }
  [data-theme="dark"] .status-in_progress {
    @apply bg-warning-900/50 text-warning-300;
  }
  
  .status-in_review {
    @apply bg-info-100 text-info-700;
  }
  [data-theme="dark"] .status-in_review {
    @apply bg-info-900/50 text-info-300;
  }
  
  .status-approved,
  .status-completed {
    @apply bg-success-100 text-success-700;
  }
  [data-theme="dark"] .status-approved,
  [data-theme="dark"] .status-completed {
    @apply bg-success-900/50 text-success-300;
  }

  /* ===== Priority badges ===== */
  .priority-low {
    background-color: var(--bg-tertiary);
    color: var(--text-muted);
  }
  
  .priority-medium {
    @apply bg-primary-100 text-primary-700;
  }
  [data-theme="dark"] .priority-medium {
    @apply bg-primary-900/50 text-primary-300;
  }
  
  .priority-high {
    @apply bg-error-100 text-error-600;
  }
  [data-theme="dark"] .priority-high {
    @apply bg-error-900/50 text-error-400;
  }
  
  .priority-urgent {
    @apply bg-error-100 text-error-700;
  }
  [data-theme="dark"] .priority-urgent {
    @apply bg-error-900/50 text-error-300;
  }

  /* ===== AI Chat bubbles ===== */
  .ai-message {
    @apply bg-primary-50 rounded-2xl rounded-tl-sm p-4;
  }
  [data-theme="dark"] .ai-message {
    @apply bg-primary-900/30;
  }

  .user-message {
    background-color: var(--bg-tertiary);
    @apply rounded-2xl rounded-tr-sm p-4;
  }

  /* ===== Rating stars ===== */
  .rating-star {
    @apply w-6 h-6 cursor-pointer transition-colors;
  }

  .rating-star.active {
    @apply text-warning-400 fill-warning-400;
  }

  .rating-star.inactive {
    color: var(--text-muted);
  }

  /* ===== Skeleton loading ===== */
  .skeleton {
    background: linear-gradient(
      90deg,
      var(--bg-tertiary) 25%,
      var(--bg-secondary) 50%,
      var(--bg-tertiary) 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    @apply rounded-md;
  }

  /* ===== Spinner ===== */
  .spinner {
    @apply w-5 h-5 rounded-full animate-spin;
    border: 2px solid var(--bg-tertiary);
    border-top-color: var(--primary);
  }

  /* ===== Button variants ===== */
  .btn-primary {
    background: var(--gradient-primary);
    @apply text-white px-6 py-3 rounded-full font-semibold text-sm transition-all duration-200;
    box-shadow: 0 4px 12px rgba(249, 115, 22, 0.25);
  }

  .btn-primary:hover {
    @apply -translate-y-0.5;
    box-shadow: 0 8px 20px rgba(249, 115, 22, 0.35);
  }

  .btn-secondary {
    background-color: transparent;
    border: 1px solid var(--border-default);
    color: var(--text-primary);
    @apply px-6 py-3 rounded-full font-medium transition-all duration-200;
  }

  .btn-secondary:hover {
    border-color: var(--primary);
    color: var(--primary);
  }

  .btn-ghost {
    background-color: transparent;
    color: var(--text-secondary);
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200;
  }

  .btn-ghost:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  /* ===== Input styling ===== */
  .input-base {
    background-color: var(--bg-tertiary);
    border: 1px solid var(--border-default);
    color: var(--text-primary);
    @apply rounded-lg px-4 py-3 text-sm transition-all duration-200;
  }

  .input-base::placeholder {
    color: var(--text-muted);
  }

  .input-base:focus {
    @apply outline-none border-primary-500;
    box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.1);
  }

  /* ===== Toggle switch ===== */
  .toggle {
    @apply w-11 h-6 rounded-full relative cursor-pointer transition-colors duration-200;
    background-color: var(--bg-tertiary);
  }

  .toggle.active {
    background-color: var(--primary);
  }

  .toggle-knob {
    @apply w-5 h-5 bg-white rounded-full absolute top-0.5 left-0.5 transition-transform duration-200;
    box-shadow: var(--shadow-sm);
  }

  .toggle.active .toggle-knob {
    @apply translate-x-5;
  }

  /* ===== Badge (orange variant) ===== */
  .badge-orange {
    @apply bg-primary-100 text-primary-700;
  }
  [data-theme="dark"] .badge-orange {
    @apply bg-primary-900/50 text-primary-300;
  }

  /* ===== Icon button ===== */
  .icon-btn {
    @apply w-9 h-9 rounded-lg flex items-center justify-center transition-all duration-200;
    color: var(--text-secondary);
  }

  .icon-btn:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .icon-btn.active {
    @apply bg-primary-100 text-primary-600;
  }
  [data-theme="dark"] .icon-btn.active {
    @apply bg-primary-900/30 text-primary-400;
  }

  /* ===== Nav item ===== */
  .nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200;
    color: var(--text-secondary);
  }

  .nav-item:hover {
    background-color: var(--bg-tertiary);
    color: var(--text-primary);
  }

  .nav-item.active {
    @apply bg-primary-100 text-primary-700;
  }
  [data-theme="dark"] .nav-item.active {
    @apply bg-primary-900/30 text-primary-300;
  }

  /* ===== Modal overlay ===== */
  .modal-overlay {
    @apply fixed inset-0 z-50 flex items-center justify-center;
    background-color: rgba(0, 0, 0, 0.5);
  }
  [data-theme="dark"] .modal-overlay {
    background-color: rgba(0, 0, 0, 0.7);
  }

  /* ===== Notification dot ===== */
  .notification-dot {
    @apply absolute -top-0.5 -right-0.5 w-2 h-2 rounded-full;
    background-color: var(--primary);
    border: 2px solid var(--bg-primary);
  }
}

@layer utilities {
  /* Line clamp utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Hide scrollbar */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Text balance */
  .text-balance {
    text-wrap: balance;
  }

  /* Transition utilities */
  .transition-fast {
    transition-duration: var(--duration-fast);
  }

  .transition-normal {
    transition-duration: var(--duration-normal);
  }

  .transition-slow {
    transition-duration: var(--duration-slow);
  }
}
